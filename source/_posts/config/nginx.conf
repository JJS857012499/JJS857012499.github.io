user  root;
worker_processes  auto;

#error_log  logs/error.log;
#error_log  logs/error.log  notice;
#error_log  logs/error.log  info;

#pid        logs/nginx.pid;


events {
    worker_connections 2048;
    use epoll;
    multi_accept on;
}


http {
    include       mime.types;
    default_type  application/octet-stream;
    server_names_hash_bucket_size 128;
        client_header_buffer_size 32k;
        large_client_header_buffers 4 32k;
        client_max_body_size 50m;
	client_body_buffer_size 50m;
	
    #log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
    #                  '$status $body_bytes_sent "$http_referer" '
    #                  '"$http_user_agent" "$http_x_forwarded_for"';

    #access_log  logs/access.log  main;

    underscores_in_headers on; #自定义 Head 必须定义

    sendfile        on;
    #tcp_nopush     on;

    #keepalive_timeout  0;
    keepalive_timeout  65;

    gzip on;
        gzip_min_length  1k;
        gzip_buffers     4 16k;
        gzip_http_version 1.1;
        gzip_comp_level 5;
        gzip_types     text/plain application/javascript application/x-javascript text/javascript text/css application/xml application/xml+rss image/jpeg image/gif image/png;
        gzip_vary on;
        gzip_proxied   expired no-cache no-store private auth;
        gzip_disable   "MSIE [1-6]\.";

	add_header Access-Control-Allow-Origin *;
        add_header Access-Control-Allow-Headers Authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With,jsessionid,enter_type;
        add_header Access-Control-Allow-Methods GET,POST,OPTIONS;
	
	fastcgi_intercept_errors on;
	proxy_intercept_errors on;
	log_format logstash_json '{ "timestamp": "$time_iso8601", '
                         '"remote_addr": "$remote_addr", '
                         '"referer": "$http_referer", '
                         '"http_head":"$host",'
                         '"request": "$request",'
                         '"uri": "$document_uri",'
                         '"uri_string": "$query_string",'
                         '"status": $status, '
                         '"bytes":$body_bytes_sent, '
                         '"agent": "$http_user_agent", '
                         '"x_forwarded": "$http_x_forwarded_for", '
                         '"upstr_addr": "$upstream_addr",'
                         '"upstr_host": "$upstream_http_host",'
                         '"request_time": "$request_time",'
                         '"ups_resp_time": "$upstream_response_time" }';
	upstream redpacket{
	server 192.168.100.15:6678;
	server 192.168.100.101:6678;
	}
	upstream settlement{
	server 192.168.100.15:9200;
	server 192.168.100.15:9300;
	}
    server {
	listen	8888;
	server_name 192.168.100.4;
	autoindex on;
	location / {
		root /usr/local/goaccess/html;
	}
}
    server {
        listen       80;

        server_name 192.168.100.4;
 
        #ssl on;
        #ssl_certificate /etc/ssl/private/1__.zhidianlife.com_bundle.crt;
        #ssl_certificate_key /etc/ssl/private/2__.zhidianlife.com.key;

        #ssl_session_timeout  5m;

        #ssl_protocols  SSLv2 SSLv3 TLSv1;
        #ssl_ciphers  HIGH:!aNULL:!MD5;
        #ssl_prefer_server_ciphers   on;
        #
        



        location / {
            root   /usr/server-forMysql/h5;
            index    index.html index.htm;
	    try_files $uri $uri/ /index.html;
        }
	error_page 405 /405.html;
	location /life-app-mall/ {
		if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers Authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 200;
                }
		proxy_set_header Host $host;
             proxy_set_header X-Real-IP $remote_addr;
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
		proxy_pass http://127.0.0.1:9090;
	}

	location /message/ {
		if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers Authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 200;
                }
		proxy_set_header Host $host;
             proxy_set_header X-Real-IP $remote_addr;
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
		proxy_pass http://192.168.100.14:8888;
	}


	location /note/ {
		if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers Authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 200;
                }
		proxy_set_header Host $host;
                proxy_set_header X-Real-IP $remote_addr;
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
		proxy_pass http://192.168.100.15:8078;
	}



	location /interface-tests/ {
		if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers Authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 200;
                }
		proxy_set_header Host $host;
                proxy_set_header X-Real-IP $remote_addr;
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
		proxy_pass http://192.168.100.14:8080;
	}

	location /interface-tests/document.html {
		if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers Authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 200;
                }
		proxy_set_header Host $host;
                proxy_set_header X-Real-IP $remote_addr;
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
		proxy_pass http://192.168.100.14:8080/interface-tests/swagger-ui.html;
	}



        location ^~ /msg-websocket/ {
 if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers Authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 200;
                }

   proxy_set_header Host $host;
             proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-Proto $scheme;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_pass http://192.168.100.14:8001/msg-websocket/;
    		proxy_set_header Upgrade $http_upgrade;
       	        proxy_set_header Connection "upgrade";
        }




	location /life-payment/ {

		if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers Authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 200;
                }
		proxy_set_header Host $host;
             proxy_set_header X-Real-IP $remote_addr;
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
		proxy_pass http://127.0.0.1:9093;
	}



	location /order-gateway/ {

		if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers Authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 200;
                }
		proxy_set_header Host $host;
             proxy_set_header X-Real-IP $remote_addr;
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
		proxy_pass http://192.168.100.14:9999;
	}



	location /jenkins/ {
		if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers Authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 200;
                }
		proxy_set_header Host $host;
             proxy_set_header X-Real-IP $remote_addr;
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
		proxy_pass http://127.0.0.1:8086;
	}




	location /life-jobs/ {
		proxy_set_header Host $host;
             proxy_set_header X-Real-IP $remote_addr;
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
		proxy_pass http://127.0.0.1:9095;
	}


	location /life-mobile-mall/ {
		if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers Authorization,token,Accept,Content-Type,app_key,app_env,secret_key,timestamp,sessionId,version,X-Requested-With;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 200;
}
		proxy_set_header Host $host;
             	proxy_set_header X-Real-IP $remote_addr;
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
		add_header app_env '2';
		proxy_pass http://127.0.0.1:9096;
	}
#	location ~* .*/swagger-ui.html {
#		deny all;
#		allow 192.168.100.12;
#	}

	location /life-mobile-h5/ {
if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers Authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 200;
}
		proxy_set_header Host $host;
             proxy_set_header X-Real-IP $remote_addr;
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
		proxy_pass http://127.0.0.1:9097;
	}


	location /life-mq/ {
		proxy_set_header Host $host;
             proxy_set_header X-Real-IP $remote_addr;
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
		proxy_pass http://127.0.0.1:9095;
	}


	location /life-app-wholesale/ {
		if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers Authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 200;
                }
                proxy_set_header Host $host;
             proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_pass http://127.0.0.1:9090;
        }

	location /life-app-user/ {
		if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers Authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 200;
                }
                proxy_set_header Host $host;
             proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_pass http://127.0.0.1:9094;
        }
	
	location /life-app-certification/ {
		if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers Authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 200;
                }
                proxy_set_header Host $host;
             proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_pass http://127.0.0.1:9091;
        }

	location /life-sms/ {
		if ($request_method = 'OPTIONS') {
                      #  add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers Authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 200;
                }
                proxy_set_header Host $host;
             proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_pass http://127.0.0.1:9093;
        }
	
	location /life-app-merchant/ {
		if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers Authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 200;
                }
                proxy_set_header Host $host;
             proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_pass http://127.0.0.1:9091;
        }

	location /life-app-logistics/ {
		if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers Authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 200;
                }
                proxy_set_header Host $host;
             proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_pass http://127.0.0.1:9092;
        }

	location /zhidian_java/ {
		if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers Authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 200;
                }
                proxy_set_header Host $host;
             proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_pass http://127.0.0.1:9092;
        }

	location /life-app-apis/ {
                if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers Authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With,jsessionid;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 200;
                }
                proxy_set_header Host $host;
             proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_pass http://127.0.0.1:9099;
        }

	location ^~ /life-platform-merchant/ {
                if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers Authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With,jsessionid;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 201;
                }
                proxy_set_header Host $host;
             proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_pass http://127.0.0.1:9099;
        }
	

	location ^~ /life-platform-merchant-v1/ {
                if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers Authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With,jsessionid;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 201;
                }
                proxy_set_header Host $host;
             proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_pass http://127.0.0.1:9100/life-platform-merchant/;
        }
	
	location ^~ /life-h2h/mall/ {
            if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers Authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 200;
                }
                proxy_set_header Host $host;
                proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-Proto $scheme;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_pass http://127.0.0.1:9097/life-h2h-mall/;
        }

	location ^~ /life-h2h/order/ {
 if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers Authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,versionCode,X-Requested-With;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 200;
                }

                proxy_set_header Host $host;
             proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-Proto $scheme;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                #proxy_set_header app_env "1";
                #proxy_pass http://192.168.100.14:6677/mall-h2h-order/;
                proxy_pass http://192.168.100.12:6677/mall-h2h-order/;
        }

	location ^~ /mobile-order/ {
 if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers Authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 200;
                }

                proxy_set_header Host $host;
             proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-Proto $scheme;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                #proxy_set_header app_env "1";
               #proxy_pass http://192.168.100.14:6688/mall-h2h-order/;
                proxy_pass http://192.168.100.12:6688/mobile-order/;
        }

 location ^~ /order-manage/ {
         if ($request_method = 'OPTIONS') {
        add_header Access-Control-Allow-Origin *;
        add_header Access-Control-Allow-Headers Authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With;
        add_header 'Access-Control-Max-Age' 3600;
        return 200;
        }
                proxy_set_header Host $host;
                proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-Proto $scheme;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
             # proxy_pass http://192.168.100.6:8085/order-manage/;
		  proxy_pass http://119.147.171.113:8085/order-manage/;
       }

	location ^~ /mobile-account-service/ {
 if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers Authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 200;
                }

                proxy_set_header Host $host;
             proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-Proto $scheme;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                #proxy_set_header app_env "1";
               #proxy_pass http://192.168.100.14:6688/mall-h2h-order/;
                proxy_pass http://192.168.100.12:7070/mobile-account-service/;
        }



location ^~ /order-gateway/wholesale/ {
 if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers Authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 200;
                }

                proxy_set_header Host $host;
             proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-Proto $scheme;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                #proxy_set_header app_env "1";
                proxy_pass http://192.168.100.14:7891/mall-wholesale-order/;
        }


	#location / {
	#	root /usr/server-forMysql/h5;
	#	index index.html index.htm;
		
	#}



        location ^~ /red-packet/ {
 if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers Authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 200;
                }

   proxy_set_header Host $host;
             proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-Proto $scheme;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_set_header app_env "1";
                proxy_pass http://192.168.100.12:6678/red-packet/;
        }



        location ^~ /test/red-packet/ {
 if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers Authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 200;
                }

   proxy_set_header Host $host;
             proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-Proto $scheme;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_set_header app_env "1";
                proxy_pass http://redpacket/red-packet/;
        }

  	location ^~ /zhidian-cmb-web/ {
 		if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers Authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 200;
                }

   		proxy_set_header Host $host;
                proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-Proto $scheme;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_set_header app_env "1";
                proxy_pass http://192.168.100.15:8081/zhidian-cmb-web/;
        }
	 location ^~ /promotion/ {
                if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers jsessionid,enter_type,authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 200;
                }

                proxy_set_header Host $host;
                proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-Proto $scheme;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_set_header app_env "1";
                proxy_pass http://192.168.100.12:7788/promotion/;

    	}

	location ^~ /passport/ {
                if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers jsessionid,enter_type,authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 201;
                }

                proxy_set_header Host $host;
                proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-Proto $scheme;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_pass http://192.168.100.14:20010/passport/;
	}

	location ^~ /thirdParty/ {
                if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers jsessionid,enter_type,authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 201;
                }

                proxy_set_header Host $host;
                proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-Proto $scheme;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_pass http://192.168.100.14:9090/thirdParty/;
        }

	
        location  /settlement/ {
                if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers jsessionid,enter_type,authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 201;
                }

                proxy_set_header Host $host;
                proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-Proto $scheme;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_pass http://settlement/settlement/;
        }


	location  /payment/ {
                if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers jsessionid,enter_type,authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 201;
                }

                proxy_set_header Host $host;
                proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-Proto $scheme;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_pass http://192.168.100.15:8180/payment/;
        }
	location ^~ /osystem/ {
                if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers jsessionid,enter_type,authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 201;
                }

                proxy_set_header Host $host;
                proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-Proto $scheme;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_pass http://192.168.100.14:8089/osystem/;
        }
	location ^~ /member/ {
                if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers jsessionid,enter_type,authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 201;
                }

                proxy_set_header Host $host;
                proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-Proto $scheme;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_pass http://192.168.100.15:8181/member/;
        }
	location ^~ /kw_manage/ {
                if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers jsessionid,enter_type,authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 201;
                }

                proxy_set_header Host $host;
                proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-Proto $scheme;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_pass http://192.168.100.15:9100/kw_manage/;
        }
	location ^~ /search/ {
                if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers jsessionid,enter_type,authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 201;
                }

                proxy_set_header Host $host;
                proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-Proto $scheme;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_pass http://192.168.100.2:8088/search/;
        }
	 location ^~ /commodity/ {
                if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers jsessionid,enter_type,authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 201;
                }

                proxy_set_header Host $host;
                proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-Proto $scheme;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_pass http://192.168.100.14:20013/commodity/;
        }

	



    }




    # HTTPS server
    #
    server {
	listen 443 default_server;
	server_name localhost;
 	ssl on;
	ssl_certificate /usr/local/nginx/1__.zhidianlife.com_bundle.crt;
	ssl_certificate_key /usr/local/nginx/2__.zhidianlife.com.key;
	
	ssl_session_cache    shared:SSL:32m;
	#ssl_session_timeout  5m;
	#SSLv3
	ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
	#ssl_ciphers  HIGH:!ADH:!EXPORT56:RC4+RSA:+MEDIUM;
	#ssl_ciphers HIGH:!aNULL:!MD5;
	        	        		
	ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:DHE-DSS-AES128-GCM-SHA256:kEDH+AESGCM:ECDHE-RSA-AES128-SHA256:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA:ECDHE-ECDSA-AES128-SHA:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA:ECDHE-ECDSA-AES256-SHA:DHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA:DHE-DSS-AES128-SHA256:DHE-RSA-AES256-SHA256:DHE-DSS-AES256-SHA:DHE-RSA-AES256-SHA:AES128-GCM-SHA256:AES256-GCM-SHA384:AES128-SHA256:AES256-SHA256:AES128-SHA:AES256-SHA:AES:CAMELLIA:DES-CBC3-SHA:!aNULL:!eNULL:!EXPORT:!DES:!RC4:!MD5:!PSK:!aECDH:!EDH-DSS-DES-CBC3-SHA:!EDH-RSA-DES-CBC3-SHA:!KRB5-DES-CBC3-SHA;
	        	        				
	ssl_prefer_server_ciphers on;	
	ssl_verify_client off;


	location / {
            root   /usr/server-forMysql/h5;
            index  tab_home.html index.html index.htm;
        }
        location /life-app-mall/ {
                if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers Authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 200;
                }

                proxy_set_header Host $host;
                proxy_set_header X-Real-IP $remote_addr;
		proxy_set_header X-Forwarded-Proto $scheme;
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_pass http://127.0.0.1:9090;
        }
	 location ~*.*/swagger-ui.html {
                deny all;
		allow 192.168.100.12;
        }



	   location /life-payment/ {

                if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers Authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 200;
                }
                proxy_set_header Host $host;
                proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-Proto $scheme;
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_pass http://127.0.0.1:9093;
        }
	
	   location /order-gateway/ {

                if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers Authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 200;
                }
                proxy_set_header Host $host;
                proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-Proto $scheme;
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_pass http://192.168.100.14:9999;
        }




        location /jenkins/ {
                if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers Authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 200;
                }
                proxy_set_header Host $host;
             proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_pass http://127.0.0.1:8086;
        }

	location /life-jobs/ {
                proxy_set_header Host $host;
             proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_pass http://127.0.0.1:9095;
        }

	location /life-mobile-mall/ {
                if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers Authorization,token,Accept,Content-Type,app_key,app_env,secret_key,timestamp,sessionId,version,X-Requested-With;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 200; 
}
                proxy_set_header Host $host;
                proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                add_header app_env '2'; 
                proxy_pass http://127.0.0.1:9096;
        }    


     	location /life-mobile-h5/ {
if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers Authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 200;
}
                proxy_set_header Host $host;
             proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-Proto $scheme;
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_pass http://127.0.0.1:9097;
        }


        location /life-mq/ {
                proxy_set_header Host $host;
             proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_pass http://127.0.0.1:9095;
        }

	    location /life-app-wholesale/ {
                if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers Authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 200;
                }
                proxy_set_header Host $host;
             proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-Proto $scheme;
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_pass http://127.0.0.1:9090;
        }


        location  /settlement/ {
                if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers jsessionid,enter_type,authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 201;
                }

                proxy_set_header Host $host;
                proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-Proto $scheme;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_pass http://settlement/settlement/;
        }

        location /life-app-user/ {
                if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers Authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 200;
                }
                proxy_set_header Host $host;
             proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-Proto $scheme;
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_pass http://127.0.0.1:9094;
        }
	
	
        location /life-app-certification/ {
                if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers Authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 200;
                }
                proxy_set_header Host $host;
             proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-Proto $scheme;
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_pass http://127.0.0.1:9091;
        }

        location /life-sms/ {
                if ($request_method = 'OPTIONS') {
                  #      add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers Authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 200;
                }
                proxy_set_header Host $host;
                proxy_set_header X-Real-IP $remote_addr;
               proxy_set_header X-Forwarded-Proto $scheme;
		 proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_pass http://127.0.0.1:9093;
        }

	 location /life-app-merchant/ {
                if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers Authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 200;
                }
                proxy_set_header Host $host;
             proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-Proto $scheme;
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_pass http://127.0.0.1:9091;
        }

        location /life-app-logistics/ {
                if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers Authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 200;
                }
                proxy_set_header Host $host;
             proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-Proto $scheme;
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_pass http://127.0.0.1:9092;
        }
	
	location /zhidian_java/ {
                if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers Authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 200;
                }
                proxy_set_header Host $host;
             proxy_set_header X-Real-IP $remote_addr;
		proxy_set_header X-Forwarded-Proto $scheme;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_pass http://127.0.0.1:9092;
        }

	 location /life-platform-merchant/ {
                if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers Authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With,jsessionid;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 201;
                }
                proxy_set_header Host $host;
             proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_pass http://127.0.0.1:9099;
        }





	 location ^~ /life-platform-merchant-v1/ {
                if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers Authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With,jsessionid;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 201;
                }
                proxy_set_header Host $host;
             proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_pass http://127.0.0.1:9100/life-platform-merchant/;
        }
	 location /life-app-apis/ {
                if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers Authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With,jsessionid;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 201;
                }
                proxy_set_header Host $host;
             proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_pass http://127.0.0.1:9099;
        }
	    location  /life-h2h-mall/ {
            if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers Authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 200;
                }
                proxy_set_header Host $host;
                proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-Proto $scheme;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_pass http://127.0.0.1:9097/life-h2h-mall/;
        }

		
		location  /life-h2h/mall {
            if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers Authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 200;
                }
                proxy_set_header Host $host;
                proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-Proto $scheme;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_pass http://127.0.0.1:9097/life-h2h-mall/;
        }

        location ^~ /life-h2h/order/ {
 if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers Authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,versionCode,X-Requested-With;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 200;
                }
             
   proxy_set_header Host $host;
             proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-Proto $scheme;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_set_header app_env "1";
                #proxy_pass http://192.168.100.14:6677/mall-h2h-order/;
	        proxy_pass http://192.168.100.12:6677/mall-h2h-order/;
        }


	location ^~ /mobile-order/ {
 if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers Authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 200;
                }

                proxy_set_header Host $host;
             proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-Proto $scheme;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                #proxy_set_header app_env "1";
               #proxy_pass http://192.168.100.14:6688/mall-h2h-order/;
                proxy_pass http://192.168.100.12:6688/mobile-order/;
        }

 location ^~ /order-manage/ {
         if ($request_method = 'OPTIONS') {
        add_header Access-Control-Allow-Origin *;
        add_header Access-Control-Allow-Headers Authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With;
        add_header 'Access-Control-Max-Age' 3600;
        return 200;
        }
                proxy_set_header Host $host;
                proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-Proto $scheme;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
              #  proxy_pass http://192.168.100.6:8085/order-manage/;
      		 proxy_pass http://119.147.171.113:8085/order-manage/;
	}

	location ^~ /mobile-account-service/ {
 if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers Authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 200;
                }

                proxy_set_header Host $host;
             proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-Proto $scheme;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                #proxy_set_header app_env "1";
               #proxy_pass http://192.168.100.14:6688/mall-h2h-order/;
                proxy_pass http://192.168.100.12:7070/mobile-account-service/;
        }





location ^~ /order-gateway/wholesale/ {
 if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers Authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 200;
                }

                proxy_set_header Host $host;
             proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-Proto $scheme;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                #proxy_set_header app_env "1";
                proxy_pass http://192.168.100.14:7891/mall-wholesale-order/;
        }



        location ^~ /red-packet/ {
 if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers Authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 200;
                }

   proxy_set_header Host $host;
             proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-Proto $scheme;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_set_header app_env "1";
                proxy_pass http://192.168.100.12:6678/red-packet/;
        }

	 location ^~ /promotion/ {
                if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers jsessionid,enter_type,authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 200;
                }

                proxy_set_header Host $host;
                proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-Proto $scheme;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_set_header app_env "1";
                proxy_pass http://192.168.100.12:7788/promotion/;
	}
	location ^~ /passport/ {
                if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers jsessionid,enter_type,Authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 201;
                }
    
                proxy_set_header Host $host;
                proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-Proto $scheme;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_pass http://192.168.100.14:20010/passport/;
        }

	location ^~ /thirdParty/ {
                if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers jsessionid,enter_type,Authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 201;
                }

                proxy_set_header Host $host;
                proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-Proto $scheme;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_pass http://192.168.100.14:9090/thirdParty/;
        }


	location  /payment/ {
                if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers jsessionid,enter_type,Authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 201;
                }

                proxy_set_header Host $host;
                proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-Proto $scheme;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_pass http://192.168.100.15:8180/payment/;
        }
	 location ^~ /osystem/ {
                if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers jsessionid,enter_type,authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 201;
                }

                proxy_set_header Host $host;
                proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-Proto $scheme;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_pass http://192.168.100.14:8089/osystem/;
        }
	location ^~ /member/ {
                if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers jsessionid,enter_type,authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 201;
                }

                proxy_set_header Host $host;
                proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-Proto $scheme;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_pass http://192.168.100.15:8181/member/;
        }
	location ^~ /search/ {
                if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers jsessionid,enter_type,authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 201;
                }

                proxy_set_header Host $host;
                proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-Proto $scheme;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_pass http://192.168.100.2:8088/search/;
        }

	location /life-mobile-mall/apis/v1/shoppingCar/add {
                if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers jsessionid,enter_type,authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 201;
                }

                proxy_set_header Host $host;
                proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-Proto $scheme;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_pass http://192.168.100.12:6688/mobile-order/v1/shoppingCar/add;
        }
	location /life-mobile-mall/apis/v1/shoppingCar/delete {
                if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers jsessionid,enter_type,authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 201;
                }

                proxy_set_header Host $host;
                proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-Proto $scheme;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_pass http://192.168.100.12:6688/mobile-order/v1/shoppingCar/delete;
        }
	location /life-mobile-mall/apis/v1/shoppingCar/getNumber {
                if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers jsessionid,enter_type,authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 201;
                }

                proxy_set_header Host $host;
                proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-Proto $scheme;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_pass http://192.168.100.12:6688/mobile-order/v1/shoppingCar/getNumber;
        }
	location /life-mobile-mall/apis/v1/shoppingCar/edit {
                if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers jsessionid,enter_type,authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 201;
                }

                proxy_set_header Host $host;
                proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-Proto $scheme;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_pass http://192.168.100.12:6688/mobile-order/v1/shoppingCar/edit;
        }
	location /life-mobile-mall/apis/v1/shoppingCar/list{
                if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers jsessionid,enter_type,authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 201;
                }

                proxy_set_header Host $host;
                proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-Proto $scheme;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_pass http://192.168.100.12:6688/mobile-order/v1/shoppingCar/list;
        }
	location /collection/{
	                if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers jsessionid,enter_type,authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 201;
                }

                proxy_set_header Host $host;
                proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-Proto $scheme;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_pass http://192.168.100.4:9098;
        }

	location ^~ /commodity/ {
                if ($request_method = 'OPTIONS') {
                        add_header Access-Control-Allow-Origin *;
                        add_header Access-Control-Allow-Headers jsessionid,enter_type,authorization,token,Accept,Content-Type,app_key,secret_key,timestamp,sessionId,version,X-Requested-With;
                        add_header 'Access-Control-Max-Age' 3600;
                        return 201;
                }

                proxy_set_header Host $host;
                proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-Proto $scheme;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_pass http://192.168.100.14:20013/commodity/;
        }

	access_log  /usr/local/nginx/logs/access443.txt  logstash_json;
        error_log   /usr/local/nginx/logs/error443.txt info;

}
server {
	listen 8000;
	server_name localhost;
	
	location / {
		root /usr/server-forMysql/h5/IntegralTrading;
		index index.html;
	}
}
}

